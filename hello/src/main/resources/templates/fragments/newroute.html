<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="utf-8" />
<title>Insert title here</title>
</head>
<body>
	<div th:fragment="newroute">
		<section id="main" class="column">
			<!--start of NewRoute-->
			<article class="module width_3_quarter">
				<div id="biggerpanel">
					<header>
						<h3 class="tabs_involved">Content Manager</h3>

					</header>
					<h1>Add new route</h1>
					<h1>Insert route number and select Start and End stations</h1>
					<div id="panel">
						<b>Start: </b> 
						<select id="start" onchange="calcRoute();">
							<option th:each="station: ${stations}" th:object="${station}"
								th:text="${station.name}"></option>
						</select> 
						<b>End: </b> <select id="end" onchange="calcRoute();">
							<option th:each="station: ${stations}" th:object="${station}"
								th:text="${station.name}"></option>

						</select>
					</div>
				</div>
			</article>

			<div id="map">
				<script>
					function initMap() {
						var directionsService = new google.maps.DirectionsService;
						var directionsDisplay = new google.maps.DirectionsRenderer;
						var map = new google.maps.Map(document
								.getElementById('map'), {
							zoom : 10,
							center : {
								lat : 46.767307,
								lng : 23.603637
							}
						});
						directionsDisplay.setMap(map);

						var onChangeHandler = function() {
							calculateAndDisplayRoute(directionsService,
									directionsDisplay);
						};
						document.getElementById('start').addEventListener(
								'change', onChangeHandler);
						document.getElementById('end').addEventListener(
								'change', onChangeHandler);
					}

					function calculateAndDisplayRoute(directionsService,
							directionsDisplay) {
						directionsService
								.route(
										{
											origin : document
													.getElementById('start').value,
											destination : document
													.getElementById('end').value,
											travelMode : google.maps.TravelMode.DRIVING
										},
										function(response, status) {
											if (status === google.maps.DirectionsStatus.OK) {
												directionsDisplay
														.setDirections(response);
											} else {
												window
														.alert('Directions request failed due to '
																+ status);
											}
										});
					}
				</script>
				<script src="/js/maping.js"></script>
			</div>
		</section>
	</div>
</body>
</html>